(this["webpackJsonpuno-game"]=this["webpackJsonpuno-game"]||[]).push([[0],{49:function(t,e,a){},81:function(t,e,a){"use strict";a.r(e);var s=a(0),n=a(8),r=a.n(n),o=a(37),i=a.n(o),c=a(22),d=a(41),l=a(38),h=a(39),u=a(1),p=a(43),b=a(42);a(49);var j=function(t){for(var e=[],a=t.length,s=0;s<a;s++){var n=Math.floor(Math.random()*a),r=e.includes(n);if(!1===r)e.push(n);else for(;!0===r;)n=Math.floor(Math.random()*a),!1===(r=e.includes(n))&&e.push(n)}return e.map((function(e){return t[e]}))},m=a(40),y=a.n(m),O=j(["b+2","b+2","b0","b1","b1","b2","b2","b3","b3","b4","b4","b5","b5","b6","b6","b7","b7","b8","b8","b9","b9","brev","brev","bskip","bskip","g+2","g+2","g0","g1","g1","g2","g2","g3","g3","g4","g4","g5","g5","g6","g6","g7","g7","g8","g8","g9","g9","grev","grev","gskip","gskip","r+2","r+2","r0","r1","r1","r2","r2","r3","r3","r4","r4","r5","r5","r6","r6","r7","r7","r8","r8","r9","r9","rrev","rrev","rskip","rskip","y+2","y+2","y0","y1","y1","y2","y2","y3","y3","y4","y4","y5","y5","y6","y6","y7","y7","y8","y8","y9","y9","yrev","yrev","yskip","yskip","wild","wild","wild","wild","wild+4","wild+4","wild+4","wild+4"]),g={hand:[],deck:[],turn:null,direction:1,potCards:[],draw:0,potColor:"",playCard:[],name:"",order:null,players:[],ID:null,gameServer:!1,deal:!0,gameOn:!1,UNO:!1,winner:null,connecting:!1},C=function(t){Object(p.a)(a,t);var e=Object(b.a)(a);function a(t){var s;return Object(l.a)(this,a),(s=e.call(this,t)).cardInfo=function(t){var e,a,s,n=t.length;return"r"===t[0]||"g"===t[0]||"b"===t[0]||"y"===t[0]?(e=t[0],2===n?(a="regular",s=t[1]):a=3===n?"+2":4===n?"rev":"skip"):(e="pending",a=t),{color:e,type:a,value:s}},s.state=g,s.deal=s.deal.bind(Object(u.a)(s)),s.play=s.play.bind(Object(u.a)(s)),s.playCard=s.playCard.bind(Object(u.a)(s)),s.checkColor=s.checkColor.bind(Object(u.a)(s)),s.cardInfo=s.cardInfo.bind(Object(u.a)(s)),s.updateColor=s.updateColor.bind(Object(u.a)(s)),s.draw=s.draw.bind(Object(u.a)(s)),s.handleSubmit=s.handleSubmit.bind(Object(u.a)(s)),s.start=s.start.bind(Object(u.a)(s)),s.reset=s.reset.bind(Object(u.a)(s)),s}return Object(h.a)(a,[{key:"reset",value:function(){var t=this;this.setState({hand:Object(d.a)(Array(this.state.players.length)).map((function(t){return[]})),deck:[],turn:null,direction:1,potCards:[],draw:0,potColor:"",playCard:[],deal:!0,gameOn:!1,UNO:!1,winner:null},(function(){t.socket.emit("updateState",{hand:t.state.hand,deck:t.state.deck,turn:t.state.turn,direction:t.state.direction,potCards:t.state.potCards,draw:t.state.draw,potColor:t.state.potColor,playCard:t.state.playCard,deal:t.state.deal,gameOn:t.state.gameOn,UNO:t.state.UNO,winner:t.state.winner})}))}},{key:"handleSubmit",value:function(t){var e=this,a=this.state.name;a.split(" ").join("")?(this.socket=y()("https://uno-server.glitch.me"),this.setState({connecting:!0}),this.socket.on("join",(function(t){if(!1===t)return alert("game session is on. \n can not currently join server"),void(e.socket=null);e.socket.emit("name",a),e.socket.on("usersInfo",(function(t){e.setState({order:t[0],players:t[1],ID:t[2],hand:t[3]}),e.setState({gameServer:!0,connecting:!1})})),e.socket.on("newUser",(function(t){e.setState({players:t[0],hand:t[1]})})),e.socket.on("lostUser",(function(t){alert("".concat(e.state.players[t[2]]," lost connection. Resetting game.")),e.setState({players:t[0],hand:t[1]}),e.setState({deck:[],turn:null,direction:1,potCards:[],draw:0,potColor:"",playCard:[],deal:!0,gameOn:!1,UNO:!1,winner:null})})),e.socket.on("updateOrder",(function(t){e.setState({order:t})})),e.socket.on("updateState",(function(t){e.setState((function(e){return Object(c.a)(Object(c.a)({},e),t)}),(function(){e.state.turn===e.state.order&&"turn"in t&&alert("It is your turn!")}))}))})),t.preventDefault()):alert("name field is empty")}},{key:"start",value:function(){var t=this;this.state.players.length<2?alert("To start the game, you need at least one friend to join the server."):this.setState({gameOn:!0,deck:O},(function(){t.socket.emit("updateState",{gameOn:t.state.gameOn,deck:t.state.deck})}))}},{key:"deal",value:function(){var t=this,e=this.state.deck,a=this.state.players.length,s=this.state.hand,n=0,r=setInterval((function(){n++;for(var o=0;o<a;o++)s[o].push(e[o+n*a]);if(t.setState({hand:s},(function(){t.socket.emit("updateState",{hand:t.state.hand})})),n>=7){var i=e.slice(7*a);t.setState({deck:i,turn:1,deal:!1},(function(){t.socket.emit("updateState",{deck:t.state.deck,turn:t.state.turn})})),clearInterval(r)}}),1e3)}},{key:"playCard",value:function(t){if(parseInt(t.target.dataset.player)!==this.state.turn)alert("Slow down! It's not your turn!!");else{var e=[t.target.dataset.value,parseInt(t.target.dataset.index)];this.setState({playCard:e},(function(){window.$("#playModal").modal("show")}))}}},{key:"play",value:function(t){var e=this,a=this.state.playCard[0],s=this.state.playCard[1],n=this.cardInfo(a),r=this.checkColor(n),o=this.state.players.length;if(r)if(0!==this.state.draw&&"+2"!==n.type&&"wild+4"!==n.type)alert("You have to draw ".concat(this.state.draw," cards SUCKER!!"));else{var i=this.state.turn,c=this.state.hand,d=this.state.hand[i];if(d.splice(s,1),c[i]=d,1===d.length&&!this.state.UNO||d.length>1&&this.state.UNO)this.draw(null,5);else if(0===d.length)return void this.setState((function(t){return{winner:t.name}}),(function(){e.socket.emit("updateState",{winner:e.state.name})}));"regular"===n.type?this.setState((function(t){return{hand:c,turn:Math.abs(t.turn+t.direction)%o,potCards:[t.potCards,a],potColor:n.color}}),(function(){e.socket.emit("updateState",{hand:e.state.hand,turn:e.state.turn,potCards:e.state.potCards,potColor:e.state.potColor})})):"rev"===n.type?2===o?this.setState((function(t){return{hand:c,turn:Math.abs(t.turn+2*t.direction)%o,potCards:[t.potCards,a],potColor:n.color}}),(function(){e.socket.emit("updateState",{hand:e.state.hand,turn:e.state.turn,potCards:e.state.potCards,potColor:e.state.potColor})})):this.setState((function(t){return{hand:c,trun:Math.abs(t.turn-t.direction)%o,direction:-1*t.direction,potCards:[t.potCards,a],potColor:n.color}}),(function(){e.socket.emit("updateState",{hand:e.state.hand,turn:e.state.turn,direction:e.state.direction,potCards:e.state.potCards,potColor:e.state.potColor})})):"skip"===n.type?this.setState((function(t){return{hand:c,trun:Math.abs(t.turn+2*t.direction)%o,potCards:[t.potCards,a],potColor:n.color}}),(function(){e.socket.emit("updateState",{hand:e.state.hand,turn:e.state.turn,potCards:e.state.potCards,potColor:e.state.potColor})})):"+2"===n.type?this.setState((function(t){return{hand:c,turn:Math.abs(t.turn+t.direction)%o,potCards:[t.potCards,a],draw:t.draw+2,potColor:n.color}}),(function(){e.socket.emit("updateState",{hand:e.state.hand,turn:e.state.turn,potCards:e.state.potCards,draw:e.state.draw,potColor:e.state.potColor})})):"wild"===n.type?(this.setState((function(t){return{hand:c,potCards:[t.potCards,a]}}),(function(){e.socket.emit("updateState",{hand:e.state.hand,potCards:e.state.potCards})})),window.$("#colorModal").modal("show")):"wild+4"===n.type&&(this.setState((function(t){return{hand:c,potCards:[t.potCards,a],draw:t.draw+4}}),(function(){e.socket.emit("updateState",{hand:e.state.hand,potCards:e.state.potCards,draw:e.state.draw})})),window.$("#colorModal").modal("show"))}else alert("color or number doesn't match!! \n play another card or draw a card!!")}},{key:"draw",value:function(t,e){var a=this;if(t&&parseInt(t.target.dataset.player)!==this.state.turn)alert("Slow down! It's not your turn!!");else{console.log(e);var s,n=this.state.deck,r=this.state.turn;s=e||(this.state.draw?this.state.draw:1);var o=this.state.players.length;if(n.length>=s)var i=0,c=setInterval((function(){i++;var t=a.state.hand,d=t[r];d.push(n.splice(-1)[0]),t[r]=d,a.setState({hand:t},(function(){a.socket.emit("updateState",{hand:a.state.hand})})),i>=s&&(a.setState((function(t){return{deck:n,turn:e?t.turn:Math.abs(t.turn+t.direction)%o,draw:e?t.draw:0}}),(function(){a.socket.emit("updateState",{deck:a.state.deck,turn:a.state.turn,draw:a.state.draw,hand:a.state.hand})})),clearInterval(c))}),500);else var d=this.state.potCards,l=n.unshift(j(d.splice(0,d.length-1))),h=0,u=setInterval((function(){h++;var t=a.state.hand,n=a.state.hand[r];n.push(l.splice(-1)[0]),t[r]=n,a.setState({hand:t},(function(){a.socket.emit("updateState",{hand:a.state.hand})})),h>=s&&(a.setState((function(t){return{deck:l,turn:e?t.turn:Math.abs(t.turn+t.direction)%o,potCards:d,draw:e?t.draw:0}}),(function(){a.socket.emit("updateState",{deck:a.state.deck,turn:a.state.turn,potCards:a.state.potCards,draw:a.state.draw,hand:a.state.hand})})),clearInterval(u))}),500)}}},{key:"checkColor",value:function(t){var e=this.state.potCards,a=e.length,s=this.state.potColor;if(0!==a){if("regular"===t.type&&e.slice(-1)[0].slice(1)!==t.value&&s!==t.color)return!1;if("+2"===t.type&&"+2"!==e.slice(-1)[0].slice(1)&&s!==t.color)return!1;if("rev"===t.type&&"rev"!==e.slice(-1)[0].slice(1)&&s!==t.color)return!1;if("skip"===t.type&&"skip"!==e.slice(-1)[0].slice(1)&&s!==t.color)return!1}return!0}},{key:"updateColor",value:function(t){var e=this,a=t.target.dataset.value,s=this.state.players.length;this.setState((function(t){return{potColor:a,turn:Math.abs(t.turn+t.direction)%s}}),(function(){e.socket.emit("updateState",{potColor:e.state.potColor,turn:e.state.turn})}))}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var t,e=this,a=this.state.players.map((function(t,e){return Object(s.jsxs)("div",{children:[e+1,") ",t," ",0===e?Object(s.jsx)("span",{style:{color:"red"},children:" <--DEALER"}):null]},e)}));return Object(s.jsx)("div",{className:"App",children:this.state.gameServer||this.state.connecting?this.state.connecting?Object(s.jsx)("div",{className:"connecting",children:"Connecting to server... Pelase Wait"}):this.state.gameServer&&!this.state.gameOn?Object(s.jsxs)("div",{className:"col-12",id:"waitingPage",children:[Object(s.jsx)("div",{className:"col-12",children:"".concat(this.state.name,", you have now joined the server! \n See below for list of players in the waiting area. If you are the dealer, once you see all the players you want to play with press start. Otherwise wait till the dealer starts the game.")}),Object(s.jsxs)("div",{className:"col-6",children:[Object(s.jsx)("b",{children:"List of connected players"}),a]}),0===this.state.order?Object(s.jsx)("div",{className:"col-6",children:Object(s.jsx)("button",{onClick:this.start,children:"Start Game"})}):null]}):null===this.state.winner?Object(s.jsxs)("div",{children:[Object(s.jsxs)("div",{className:"row fix-it",children:[Object(s.jsx)("div",{className:"col-12",id:"deal",children:0===this.state.order&&this.state.deal?Object(s.jsx)("button",{className:"btn btn-success btn-sm",onClick:this.deal,children:"DEAL"}):null}),Object(s.jsxs)("div",{className:"col-2",id:"pot",children:[Object(s.jsxs)("figure",{children:[e.state.potCards.length?Object(s.jsx)("img",{alt:"pot card",width:61.5,height:87.8,src:"./images/cards/"+e.state.potCards.slice(-1)[0]+".png",style:{}}):Object(s.jsx)("img",{alt:"pot card",width:61.5,height:87.8,src:"./images/cards/blank.png"}),Object(s.jsx)("figcaption",{style:{fontSize:"6pt",fontWeight:"bold",width:61.5,textAlign:"center"},children:"DISCARD POT"})]}),Object(s.jsx)("button",{className:"btn btn-sm",style:{backgroundColor:this.state.UNO?"red":"grey"},onClick:function(){return e.setState((function(t){return{UNO:!t.UNO}}))},children:"UNO"})]}),Object(s.jsxs)("div",{className:"col-2",id:"deck",children:[Object(s.jsx)("img",{alt:"deck card",width:61.5,height:87.8,src:"./images/cards/back.png"}),Object(s.jsx)("br",{}),(t=this.state.order,Object(s.jsxs)("button",{className:"btn btn-info btn-sm","data-player":t,onClick:function(t){e.draw(t,0)},children:["DRAW ",e.state.draw>0?Object(s.jsx)("span",{className:"badge badge-light",children:e.state.draw}):null]}))]}),Object(s.jsx)("div",{className:"col-8",id:"message-board",children:Object(s.jsx)("div",{className:"card",style:{width:"100%"},children:Object(s.jsxs)("div",{className:"card-body",children:[Object(s.jsx)("h5",{className:"card-title",children:"Message Board"}),Object(s.jsxs)("p",{className:"card-text",children:[Object(s.jsxs)("b",{children:["TURN: ",this.state.players[this.state.turn]]}),Object(s.jsx)("br",{}),Object(s.jsxs)("b",{children:["POT COLOR: ","r"===this.state.potColor?Object(s.jsx)("span",{style:{color:"red"},children:"RED"}):"b"===this.state.potColor?Object(s.jsx)("span",{style:{color:"blue"},children:"BLUE"}):"g"===this.state.potColor?Object(s.jsx)("span",{style:{color:"green"},children:"GREEN"}):"y"===this.state.potColor?Object(s.jsx)("span",{style:{color:"darkorange"},children:"YELLOW"}):null]})," ",Object(s.jsx)("br",{}),Object(s.jsxs)("b",{children:["HAND:  ",this.state.players.map((function(t,a){return Object(s.jsxs)("span",{children:[t,"; ",e.state.hand[a].length,", "]},a)}))]})]})]})})})]}),Object(s.jsxs)("div",{className:"row below",children:[Object(s.jsx)("div",{className:"col-12",id:"hand",children:function(t){return e.state.hand[t].map((function(a,n){return Object(s.jsx)("button",{className:"btn btn-info",onClick:e.playCard,children:Object(s.jsx)("img",{alt:"card",width:41,height:58.5,"data-player":t,"data-value":a,"data-index":n,src:"./images/cards/"+a+".png"})},n)}))}(this.state.order)}),Object(s.jsx)("div",{className:"modal",id:"colorModal","data-keyboard":"false","data-backdrop":"static",children:Object(s.jsxs)("div",{className:"modal-content",children:[Object(s.jsx)("div",{className:"modal-header",children:Object(s.jsx)("h5",{className:"modal-title",children:"MESSAGE"})}),Object(s.jsx)("div",{className:"modal-body",children:Object(s.jsx)("p",{children:" What color do you want to change to or stay the same color with? "})}),Object(s.jsxs)("div",{className:"modal-footer",children:[Object(s.jsx)("button",{type:"button",className:"btn btn-danger","data-dismiss":"modal","data-value":"r",onClick:this.updateColor,children:"RED"}),Object(s.jsx)("button",{type:"button",className:"btn btn-success","data-dismiss":"modal","data-value":"g",onClick:this.updateColor,children:"GREEN"}),Object(s.jsx)("button",{type:"button",className:"btn btn-warning","data-dismiss":"modal","data-value":"y",onClick:this.updateColor,children:"YELLOW"}),Object(s.jsx)("button",{type:"button",className:"btn btn-primary","data-dismiss":"modal","data-value":"b",onClick:this.updateColor,children:"BLUE"})]})]})}),Object(s.jsx)("div",{className:"modal",id:"playModal",children:Object(s.jsxs)("div",{className:"modal-content",children:[Object(s.jsxs)("div",{className:"modal-header",children:[Object(s.jsx)("h5",{className:"modal-title",children:"WANT TO PLAY THE CARD BELOW?"}),Object(s.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:Object(s.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(s.jsx)("div",{className:"modal-body",children:Object(s.jsx)("img",{alt:"play card",id:"cardImg",width:61.5,height:87.8,src:"./images/cards/"+e.state.playCard[0]+".png",onChange:function(){}})}),Object(s.jsxs)("div",{className:"modal-footer",children:[Object(s.jsx)("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",children:"CANCEL"}),Object(s.jsx)("button",{type:"button",className:"btn btn-success","data-dismiss":"modal",id:"play",value:"a,b",onClick:this.play,children:"YES"})]})]})})]})]}):Object(s.jsxs)("div",{style:{fontSize:"20pt"},children:[this.state.winner," WON THE GAME!!!! ",Object(s.jsx)("br",{}),Object(s.jsx)("button",{className:"btn btn-sm btn-success",onClick:this.reset,children:"RESTART GAME"})]}):Object(s.jsxs)("div",{className:"col-12",id:"homePage",children:[Object(s.jsx)("div",{className:"col-12 header",children:"Welcome to UNO Game!"}),Object(s.jsx)("div",{className:"col-12",children:Object(s.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(s.jsxs)("label",{children:[Object(s.jsx)("b",{children:"Your name:"}),Object(s.jsx)("br",{}),Object(s.jsx)("input",{type:"text",value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})},placeholder:"name"})]}),Object(s.jsx)("br",{}),Object(s.jsx)("input",{type:"submit",value:"Join Game",className:"button"})]})})]})})}}]),a}(n.Component);i.a.render(Object(s.jsx)(r.a.StrictMode,{children:Object(s.jsx)(C,{})}),document.getElementById("root"))}},[[81,1,2]]]);
//# sourceMappingURL=main.499df525.chunk.js.map